(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"20d6":function(e,t,i){"use strict";var a=i("5ca1"),n=i("0a49")(6),r="findIndex",o=!0;r in[]&&Array(1)[r](function(){o=!1}),a(a.P+a.F*o,"Array",{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(r)},5974:function(e,t){var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("strap-window",[i("div",{staticClass:"strap fluid main container"},[i(e.content,{tag:"component"})],1)])},a=[];e.exports=function(e){var t="function"===typeof e?e.options:e;return t.render=i,t.staticRenderFns=a,e}},"5e4d":function(e,t){var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"strap main responsive fluid container"},[i("h1",{staticClass:"strap header dividing"},[e._v("\r\n    "+e._s(e.$t("dashboard.title"))+"\r\n    "),i("strap-button",{staticStyle:{float:"right","font-size":"1rem"},on:{click:e.openHelpWindow}},[e._v(e._s(e.$t("common.help")))]),e._v(" "),i("strap-button",{staticStyle:{float:"right","font-size":"1rem"},on:{click:e.openKnowMoreWindow}},[e._v(e._s(e.$t("common.knowMore")))])],1),e._v(" "),i("strap-alert",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{spaced:""}},[i("strap-icon",{attrs:{slot:"icon",icon:"spinner",animation:"pulse",size:"3x"},slot:"icon"}),e._v("\r\n    "+e._s(e.$t("common.loading"))+"\r\n  ")],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"strap flex-grid",staticStyle:{flex:"0"}},[i("div",{staticClass:"row"},[i("strap-button",{attrs:{"toggle-model":e.edit,flat:"",color:"indigo"},on:{"update:toggleModel":function(t){e.edit=t},"update:toggle-model":function(t){e.edit=t}}},[e._v(e._s(e.$t("common.pageEditMode")))]),e._v(" "),i("strap-button",{attrs:{flat:"",color:"brown"},on:{click:function(t){return e.$refs.pooledDP.openPremadeWindow()}}},[e._v(e._s(e.$t("common.addElement")))])],1)]),e._v(" "),e.loading?e._e():i("strap-pooled-dynamic-page",{ref:"pooledDP",attrs:{edit:e.edit,pool:e.pool,elements:e.elements,"page-data":e.pageData,bindings:e.bindings}})],1)},a=[];e.exports=function(e){var t="function"===typeof e?e.options:e;return t.render=i,t.staticRenderFns=a,e}},"7f7f":function(e,t,i){var a=i("86cc").f,n=Function.prototype,r=/^\s*function ([^ (]*)/,o="name";o in n||i("9e1e")&&a(n,o,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(e){return""}}})},f465:function(e,t,i){"use strict";i.r(t);i("7514"),i("7f7f"),i("20d6");var a=i("9ab4"),n=i("60a3"),r=i("2474"),o=i("a0c7"),d=[new r["DynamicPageStatElement"]({id:"dTotalSales",identifier:":i18n:dashboard.totalSales.identifier",useFlow:!0,flowId:"dTotalSales",unique:!0}),new r["DynamicPageStatElement"]({id:"dTotalProducts",identifier:":i18n:dashboard.totalProducts.identifier",useFlow:!0,flowId:"dTotalProducts",unique:!0}),new r["DynamicPageStatElement"]({id:"dTotalEarnings",identifier:":i18n:dashboard.totalEarnings.identifier",useFlow:!0,flowId:"dTotalEarnings",unique:!0,size:"normal"}),new r["DynamicPageStatElement"]({id:"dTotalProductsSold",identifier:":i18n:dashboard.totalProductsSold.identifier",useFlow:!0,flowId:"dTotalProductsSold",unique:!0}),new r["DynamicPageStatElement"]({id:"dAverageProductsPerSale",identifier:":i18n:dashboard.averageProductsPerSale.identifier",useFlow:!0,flowId:"dAverageProductsPerSale",unique:!0}),new r["DynamicPageStatElement"]({id:"dBestSeller",identifier:":i18n:dashboard.bestSeller.identifier",useFlow:!0,flowId:"dBestSeller",unique:!0,size:"smaller"}),new r["DynamicPageStatElement"]({id:"dSalesPerDay",identifier:":i18n:dashboard.salesPerDay.identifier",useFlow:!0,flowId:"dSalesPerDay",unique:!0}),new r["DynamicPageStatElement"]({id:"dSoldPerDay",identifier:":i18n:dashboard.soldPerDay.identifier",useFlow:!0,flowId:"dSoldPerDay",unique:!0}),new r["DynamicPageStatElement"]({id:"dEarningsPerDay",identifier:":i18n:dashboard.earningsPerDay.identifier",useFlow:!0,flowId:"dEarningsPerDay",unique:!0})],s=[new r["DynamicPageStatElement"]({id:"dTotalSales",identifier:":i18n:dashboard.totalSales.identifier",useFlow:!0,flowId:"dTotalSales",unique:!0,adaptivePosition:{lg:{x:0,y:8,width:2,height:3},md:{x:1,y:9,width:2,height:3},sm:{x:0,y:7,width:2,height:3},xs:{x:0,y:7,width:1,height:3}}}),new r["DynamicPageStatElement"]({id:"dTotalEarnings",identifier:":i18n:dashboard.totalEarnings.identifier",useFlow:!0,flowId:"dTotalEarnings",unique:!0,size:"normal",adaptivePosition:{lg:{x:3,y:0,width:4,height:4},md:{x:2,y:0,width:3,height:4},sm:{x:1,y:0,width:2,height:4},xs:{x:0,y:0,width:1,height:4}}}),new r["DynamicPageStatElement"]({id:"dTotalProductsSold",identifier:":i18n:dashboard.totalProductsSold.identifier",useFlow:!0,flowId:"dTotalProductsSold",unique:!0,adaptivePosition:{lg:{x:6,y:8,width:2,height:3},md:{x:4,y:9,width:2,height:3},sm:{x:0,y:10,width:2,height:3},xs:{x:0,y:13,width:1,height:3}}}),new r["DynamicPageStatElement"]({id:"dAverageProductsPerSale",identifier:":i18n:dashboard.averageProductsPerSale.identifier",useFlow:!0,flowId:"dAverageProductsPerSale",unique:!0,adaptivePosition:{lg:{x:4,y:10,width:2,height:3},md:{x:2,y:12,width:3,height:3},sm:{x:1,y:13,width:2,height:3},xs:{x:0,y:19,width:1,height:3}}}),new r["DynamicPageStatElement"]({id:"dBestSeller",identifier:":i18n:dashboard.bestSeller.identifier",useFlow:!0,flowId:"dBestSeller",unique:!0,size:"smaller",adaptivePosition:{lg:{x:3,y:16,width:4,height:3},md:{x:2,y:17,width:3,height:3},sm:{x:0,y:16,width:4,height:3},xs:{x:0,y:22,width:1,height:4}}}),new r["DynamicPageStatElement"]({id:"dSalesPerDay",identifier:":i18n:dashboard.salesPerDay.identifier",useFlow:!0,flowId:"dSalesPerDay",unique:!0,adaptivePosition:{lg:{x:2,y:8,width:2,height:3},md:{x:0,y:12,width:2,height:3},sm:{x:2,y:7,width:2,height:3},xs:{x:0,y:10,width:1,height:3}}}),new r["DynamicPageStatElement"]({id:"dSoldPerDay",identifier:":i18n:dashboard.soldPerDay.identifier",useFlow:!0,flowId:"dSoldPerDay",unique:!0,adaptivePosition:{lg:{x:8,y:8,width:2,height:3},md:{x:5,y:12,width:2,height:3},sm:{x:2,y:10,width:2,height:3},xs:{x:0,y:16,width:1,height:3}}}),new r["DynamicPageStatElement"]({id:"dEarningsPerDay",identifier:":i18n:dashboard.earningsPerDay.identifier",useFlow:!0,flowId:"dEarningsPerDay",unique:!0,adaptivePosition:{lg:{x:4,y:6,width:2,height:3},md:{x:2,y:6,width:3,height:3},sm:{x:1,y:4,width:2,height:3},xs:{x:0,y:4,width:1,height:3}}})],l={id:"dTotalSales",group:"dashboard",steps:[{id:"renderer",type:"renderer",root:!0,pos:{x:275,y:25},inboundPorts:[{id:"valuePort",definitionName:"value",destination:{stepId:"pageData",portId:"pageDataVal"}}]},{id:"pageData",type:"pageData",pos:{x:25,y:25},outboundPorts:[{id:"pageDataVal",definitionName:"totalSales",destination:{stepId:"renderer",portId:"valuePort"}}]}]},p={id:"dTotalProducts",group:"dashboard",steps:[{id:"renderer",type:"renderer",root:!0,pos:{x:275,y:25},inboundPorts:[{id:"valuePort",definitionName:"value",destination:{stepId:"pageData",portId:"pageDataVal"}}]},{id:"pageData",type:"pageData",pos:{x:25,y:25},outboundPorts:[{id:"pageDataVal",definitionName:"totalProducts",destination:{stepId:"renderer",portId:"valuePort"}}]}]},u={id:"dTotalEarnings",group:"dashboard",steps:[{id:"renderer",type:"renderer",root:!0,pos:{x:275,y:25},inboundPorts:[{id:"valuePort",definitionName:"value",destination:{stepId:"pageData",portId:"pageDataVal"}}]},{id:"pageData",type:"pageData",pos:{x:25,y:25},outboundPorts:[{id:"pageDataVal",definitionName:"totalEarnings",destination:{stepId:"renderer",portId:"valuePort"}}]}]},h={id:"dTotalProductsSold",group:"dashboard",steps:[{id:"renderer",type:"renderer",root:!0,pos:{x:275,y:25},inboundPorts:[{id:"valuePort",definitionName:"value",destination:{stepId:"pageData",portId:"pageDataVal"}}]},{id:"pageData",type:"pageData",pos:{x:25,y:25},outboundPorts:[{id:"pageDataVal",definitionName:"totalProductsSold",destination:{stepId:"renderer",portId:"valuePort"}}]}]},c={id:"dAverageProductsPerSale",group:"dashboard",steps:[{id:"renderer",type:"renderer",root:!0,pos:{x:275,y:25},inboundPorts:[{id:"valuePort",definitionName:"value",destination:{stepId:"pageData",portId:"pageDataVal"}}]},{id:"pageData",type:"pageData",pos:{x:25,y:25},outboundPorts:[{id:"pageDataVal",definitionName:"averageProductsPerSale",destination:{stepId:"renderer",portId:"valuePort"}}]}]},g={id:"dBestSeller",group:"dashboard",steps:[{id:"renderer",type:"renderer",root:!0,pos:{x:275,y:25},inboundPorts:[{id:"valuePort",definitionName:"value",destination:{stepId:"pageData",portId:"pageDataVal"}}]},{id:"pageData",type:"pageData",pos:{x:25,y:25},outboundPorts:[{id:"pageDataVal",definitionName:"bestSeller",destination:{stepId:"renderer",portId:"valuePort"}}]}]},f={id:"dEarningsPerDay",group:"dashboard",steps:[{id:"renderer",type:"renderer",root:!0,pos:{x:275,y:25},inboundPorts:[{id:"valuePort",definitionName:"value",destination:{stepId:"pageData",portId:"pageDataVal"}}]},{id:"pageData",type:"pageData",pos:{x:25,y:25},outboundPorts:[{id:"pageDataVal",definitionName:"earningsPerDay",destination:{stepId:"renderer",portId:"valuePort"}}]}]},y={id:"dSoldPerDay",group:"dashboard",steps:[{id:"renderer",type:"renderer",root:!0,pos:{x:275,y:25},inboundPorts:[{id:"valuePort",definitionName:"value",destination:{stepId:"pageData",portId:"pageDataVal"}}]},{id:"pageData",type:"pageData",pos:{x:25,y:25},outboundPorts:[{id:"pageDataVal",definitionName:"soldPerDay",destination:{stepId:"renderer",portId:"valuePort"}}]}]},m={id:"dSalesPerDay",group:"dashboard",steps:[{id:"renderer",type:"renderer",root:!0,pos:{x:275,y:25},inboundPorts:[{id:"valuePort",definitionName:"value",destination:{stepId:"pageData",portId:"pageDataVal"}}]},{id:"pageData",type:"pageData",pos:{x:25,y:25},outboundPorts:[{id:"pageDataVal",definitionName:"salesPerDay",destination:{stepId:"renderer",portId:"valuePort"}}]}]},P={totalSales:{identifier:":i18n:dashboard.totalSales.identifier",description:":i18n:dashboard.totalSales.description",immutable:!0,type:"number"},totalProducts:{identifier:":i18n:dashboard.totalProducts.identifier",description:":i18n:dashboard.totalProducts.description",immutable:!0,type:"number"},totalEarnings:{identifier:":i18n:dashboard.totalEarnings.identifier",description:":i18n:dashboard.totalEarnings.description",immutable:!0,type:"currency"},totalProductsSold:{identifier:":i18n:dashboard.totalProductsSold.identifier",description:":i18n:dashboard.totalProductsSold.description",immutable:!0,type:"number"},averageProductsPerSale:{identifier:":i18n:dashboard.averageProductsPerSale.identifier",description:":i18n:dashboard.averageProductsPerSale.description",immutable:!0,type:"number"},bestSeller:{identifier:":i18n:dashboard.bestSeller.identifier",description:":i18n:dashboard.bestSeller.description",immutable:!0,type:"text"},earningsPerDay:{identifier:":i18n:dashboard.earningsPerDay.identifier",description:":i18n:dashboard.earningsPerDay.description",immutable:!0,type:"text"},soldPerDay:{identifier:":i18n:dashboard.soldPerDay.identifier",description:":i18n:dashboard.soldPerDay.description",immutable:!0,type:"text"},salesPerDay:{identifier:":i18n:dashboard.salesPerDay.identifier",description:":i18n:dashboard.salesPerDay.description",immutable:!0,type:"text"}},w=i("5e4d"),b=i.n(w),D=i("0eeb"),v=i("5974"),S=i.n(v),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a["c"](t,e),Object.defineProperty(t.prototype,"content",{get:function(){return D["a"][this.$i18n.locale]},enumerable:!0,configurable:!0}),t=a["b"]([S.a,n["a"]],t),t}(Object(n["b"])(r["WindowMixin"])),I=x,E=i("3f0c"),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loading=0,t.error=null,t.edit=!1,t.products=null,t.sales=null,t.elements=s,t}return a["c"](t,e),Object.defineProperty(t.prototype,"pool",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageData",{get:function(){if(this.sales&&this.products){for(var e=new o["TypedNumber"]({value:0,type:"currency",unit:"1"}),t=0,i={},a=0,n=this.sales;a<n.length;a++){var r=n[a],d=new o["TypedNumber"]({value:r.total,type:"currency"});e=e.add(d),t+=r.products.length;for(var s=0,l=r.products;s<l.length;s++){var p=l[s];i[p]?i[p]+=1:i[p]=1}}var u=this.sales.filter(function(e,t,i){return i.findIndex(function(t){return t.date===e.date})===t}),h="",c=0;for(var p in i)i.hasOwnProperty(p)&&i[p]>c&&(h=p,c=i[p]);return h=this.products.find(function(e){return e.id===h}).name,{totalSales:this.sales.length,totalProducts:this.products.length,totalEarnings:e,totalProductsSold:t,averageProductsPerSale:Math.round(t/this.sales.length*10)/10,bestSeller:h,salesPerDay:Math.round(this.sales.length/u.length),soldPerDay:Math.round(t/u.length),earningsPerDay:e.divideNumber({value:u.length,type:"number"})}}return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindings",{get:function(){return P},enumerable:!0,configurable:!0}),t.prototype.openKnowMoreWindow=function(){this.openWindow({id:"dashboardKnowMore",title:":i18n:common.knowMore",icon:"question",width:500,height:400,component:I,centerOnOpen:!0})},t.prototype.openHelpWindow=function(){this.openWindow({id:"dynamicPageHelp",title:":i18n:common.dynamicPageHelp",icon:"question-circle",width:500,height:425,component:E["a"],centerOnOpen:!0})},t.prototype.created=function(){var e=this;this.loading=3,this.$store.dispatch("getSales").then(function(t){e.sales=t}).catch(function(t){e.error=t}).finally(function(){e.loading-=1}),this.$store.dispatch("getProducts").then(function(t){e.products=t}).catch(function(t){e.error=t}).finally(function(){e.loading-=1}),this.$store.dispatch("getDashboardListDef").then(function(t){t.length&&(e.elements=t)}).catch(function(t){e.error=t}).finally(function(){e.loading-=1}),this.$store.state.semstrap&&this.$store.state.semstrap.flows||Object(r["FlowsStorePlugin"])(this.$store),this.$store.dispatch("semstrap/flows/groupBindings",{group:"dashboard",bindings:function(){return e.bindings}}),this.$store.dispatch("semstrap/flows/create",l),this.$store.dispatch("semstrap/flows/create",p),this.$store.dispatch("semstrap/flows/create",u),this.$store.dispatch("semstrap/flows/create",h),this.$store.dispatch("semstrap/flows/create",c),this.$store.dispatch("semstrap/flows/create",g),this.$store.dispatch("semstrap/flows/create",f),this.$store.dispatch("semstrap/flows/create",y),this.$store.dispatch("semstrap/flows/create",m)},t.prototype.beforeDestroy=function(){this.$store.commit("dashboardListDef",this.elements)},t=a["b"]([b.a,n["a"]],t),t}(Object(n["b"])(r["WindowManagerMixin"]));t["default"]=$}}]);